(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(40)},38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),u=n.n(c),i=n(12),l=n(3),o=n(2),s=n(4),m=n.n(s);function f(){}var d=Object(r.createContext)({url:null,go:f,params:{},setParams:f});function h(e){var t=e.children,n=function(){var e=Object(r.useState)(window.location.pathname),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)(function(){m()(function(e,t){return a(t)})}),[n,function(e){a(e),m()(e)}]}(),c=Object(o.a)(n,2),u=c[0],i=c[1];return a.a.createElement(d.Provider,{value:{url:u,go:i}},t)}var p=Object(r.createContext)({users:[],requestUsers:f,hello:null}),E=Object(r.createContext)({products:[]});function v(e,t){return Object(i.a)({},e,{id:t+1,slug:e.name.toLowerCase().replace(" ","_")})}function g(){return fetch("https://swapi.co/api/people/").then(function(e){return e.json()}).then(function(e){return e.results}).then(function(e){return e.map(v)})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.id?fetch("https://swapi.co/api/people/"+e.id).then(function(e){return e.json()}).then(v):new Promise(function(e){return e([])})}function j(){return fetch("https://swapi.co/api/starships/").then(function(e){return e.json()}).then(function(e){return e.results}).then(function(e){return e.map(v)})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.id?fetch("https://swapi.co/api/starships/"+e.id).then(function(e){return e.json()}).then(v):new Promise(function(e){return e([])})}var O={loadImage:function(e){var t=new Image;return new Promise(function(n){t.onload=function(){return setTimeout(function(){return n(e)},3e3)},t.src=e})}};var C=n(11),k=n.n(C)()();function x(e){var t=e.path,n=e.children,a=Object(r.useContext)(d).url,c=k(t)(a);return!1!==c?(a.split("/").filter(function(e){return e}).map(function(e,t){return c[t]=e}),n(c)):null}var P=n(1);function S(e){var t=e.href,n=e.children,r=Object(P.a)(e,["href","children"]);return a.a.createElement("a",Object.assign({},r,{href:t||"!#"}),n)}function N(e){var t=e.component,n=Object(P.a)(e,["component"]),c=Object(r.useContext)(d).go,u=t||S;return a.a.createElement(u,Object.assign({},n,{onClick:function(e){e.preventDefault(),e.stopPropagation(),n.onClick&&n.onClick(e),n.href&&c(n.href)}}))}function U(){throw new Promise(function(e){setTimeout(e,5e3)})}function y(){var e=Object(r.useContext)(p).clearCache;return a.a.createElement("div",{className:"topbar"},a.a.createElement(N,{href:"/"},"Home"),a.a.createElement(N,{href:"/users"},"People"),a.a.createElement(N,{href:"/products"},"Products"),a.a.createElement(N,{onClick:function(){return e()}},"Clear cache"),a.a.createElement(N,{onClick:U},"Throw"))}function I(e){var t=e.items,n=void 0===t?[]:t,r=e.children,c=Object(P.a)(e,["items","children"]);return n?a.a.createElement("ul",c,n.map(r)):null}function L(e){var t=e.children;return a.a.createElement("li",null,t)}function R(e){var t=e.id,n=Object(r.useContext)(p).getResource,c=n("fetchUser")({id:t});if(!c)return null;return a.a.createElement("div",{className:"user-detail"},a.a.createElement("div",{className:"image"},a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"loading image...")},c.image&&a.a.createElement(function(e){e.src;var t=n("loadImage")("https://raw.githubusercontent.com/johnlindquist/swapi-json-server/master/public/"+c.image);return a.a.createElement("img",{src:t,alt:c.name})},{src:c.image}))),a.a.createElement("div",{className:"name"},"Name: ",c.name),a.a.createElement("div",{className:"name"},"Gender: ",c.gender),a.a.createElement("div",{className:"name"},"Birth Year: ",c.birth_year))}function T(e){var t=e.id,n=(0,Object(r.useContext)(p).getResource)("fetchUsers")({});return n?a.a.createElement(I,{items:n},function(e){return a.a.createElement(L,{key:e.id},String(e.id)!==String(t)&&a.a.createElement("h2",null,a.a.createElement(N,{href:"/users/"+e.id},e.name)),String(e.id)===String(t)&&a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"Loading user detail...")},a.a.createElement(R,{id:t})))}):null}function q(e){var t=e.id;return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"Loading user list...")},a.a.createElement(T,{id:t}))}function B(){var e=(0,Object(r.useContext)(E).getResource)("fetchProducts")({id:9,name:"Leonard"});return a.a.createElement(I,{items:e},function(e){return a.a.createElement(L,{key:e.id},e.name)})}n(38);var J=document.getElementById("root");u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(function(e){var t=e.children;return a.a.createElement(l.a,{context:E,fetchProducts:j,fetchProduct:w},a.a.createElement(l.a,Object.assign({context:p,fetchUsers:g,fetchUser:b},O),a.a.createElement(h,null,t)))},null,a.a.createElement(function(){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"global loading...")},a.a.createElement(x,{path:"(.*)"},function(e){return a.a.createElement(y,null)}),a.a.createElement(x,{path:"/"},function(e){return a.a.createElement("div",null,"initial")}),a.a.createElement(x,{path:"/users/:id?"},function(e){return a.a.createElement(q,e)}),a.a.createElement(x,{path:"/products(/.*)?"},function(e){return a.a.createElement(B,null)}))},null))),J)}},[[13,2,1]]]);
//# sourceMappingURL=main.bc61d570.chunk.js.map